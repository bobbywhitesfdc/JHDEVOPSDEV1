//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

@IsTest
public class CopadoGitMetadata_Test {
    public static final String TYPE_APEXCLASS = 'ApexClass';
    public static final String TYPE_APEXTRIGGER = 'ApexTrigger';
    public static final String TYPE_PAGE = 'Page';
       
    public static final String JSON_ARRAY = '[{"t":"CustomObject","n":"NBDS_eApp__c","cmm":"updated"},{"t":"Flow","n":"Update_New_or_Existing_Estimates-20","cmm":"created"},{"t":"CustomObject","n":"Application__c","cmm":"updated"}]';

    
    static testMethod void testParse() {
        String json = '{"t":"CustomObject","n":"NBDS_eApp__c","cmm":"updated"}';

        CopadoGitMetadata obj = CopadoGitMetadata.parse(json);
        System.assert(obj != null,'Must produce an object');
        System.assertEquals(obj.n,'NBDS_eApp__c','Expected to find NBDS_eApp__c');
        System.assertEquals(obj.t,'CustomObject','Expected to find CustomObject');
        System.assertEquals(obj.cmm,'updated','Expected to find updated');

    }

    static testMethod void testParseArray() {
 
        List<CopadoGitMetadata> myList = CopadoGitMetadata.parseArray(JSON_ARRAY);
        System.assert(myList != null,'Must produce an array');
        System.assertEquals(myList.size(),3,'Expected 3 items');
        System.assertEquals(myList[0].n,'NBDS_eApp__c','Expected to find NBDS_eApp__c');
        System.assertEquals(myList[0].t,'CustomObject','Expected to find CustomObject');
        System.assertEquals(myList[0].cmm,'updated','Expected to find updated');

    }

    static testMethod void testCompareToSort() {
        List<CopadoGitMetadata> myList = CopadoGitMetadata.parseArray(JSON_ARRAY);
        System.assert(myList != null,'Must produce an array');

        myList.sort();
        System.assertEquals(myList[0].n,'Application__c');
    }
    static testMethod void testCompareTo() {
        // Compare Same Type & Name
        CopadoGitMetadata item1 = new CopadoGitMetadata();
        item1.n = 'Bravo';
        item1.t = TYPE_APEXTRIGGER;

        CopadoGitMetadata item2 = new CopadoGitMetadata();
        item2.n = item1.n;
        item2.t = item1.t;
        System.AssertEquals(0,item1.compareTo(item2),'Equal items should be 0');

        CopadoGitMetadata item3 = new CopadoGitMetadata();
        item3.n = item1.n;
        item3.t = TYPE_PAGE;

        System.AssertEquals(-1,item1.compareTo(item3),'Same name, lesser types');

        CopadoGitMetadata item4 = new CopadoGitMetadata();
        item4.n = item1.n;
        item4.t = TYPE_APEXCLASS;

        System.AssertEquals(1,item1.compareTo(item4),'Same name, greater type');

        CopadoGitMetadata item5 = new CopadoGitMetadata();
        item5.n = 'Charlie';
        item5.t = item1.t;

        System.AssertEquals(-1,item1.compareTo(item5),'Same type, lesser name');

        CopadoGitMetadata item6 = new CopadoGitMetadata();
        item6.n = 'Alpha';
        item6.t = item1.t;

        System.AssertEquals(1,item1.compareTo(item6),'Same type, greater name');

    }

}